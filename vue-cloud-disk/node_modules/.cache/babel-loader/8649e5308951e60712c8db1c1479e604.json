{"remainingRequest":"D:\\uinapp\\vue-cloud-disk\\node_modules\\babel-loader\\lib\\index.js!D:\\uinapp\\vue-cloud-disk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\uinapp\\vue-cloud-disk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\uinapp\\vue-cloud-disk\\src\\views\\Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\uinapp\\vue-cloud-disk\\src\\views\\Register.vue","mtime":1629611575856},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1628037320207},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\babel-loader\\lib\\index.js","mtime":1628037337839},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1628037320207},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\vue-loader\\lib\\index.js","mtime":1628037334930}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Register\",\n  data: function data() {\n    var _this = this;\n\n    var name = function name(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入账号'));\n      } else if (value.length < 3) {\n        callback(new Error('至少位三个字符'));\n      } else {\n        callback();\n      }\n    };\n\n    var pass = function pass(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else if (value.length < 6) {\n        callback(new Error('至少位六个字符'));\n      } else {\n        callback();\n      }\n    };\n\n    var repass = function repass(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else if (value !== _this.ruleForm.pass) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    };\n\n    var phone = function phone(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入手机号'));\n      } else if (value.length !== 11) {\n        callback(new Error('请输入正确的手机号'));\n      } else {\n        callback();\n      }\n    };\n\n    var yzm = function yzm(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入验证码'));\n      } else if (value.length !== 6) {\n        callback(new Error('请输入6位数字验证码'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      checkcode: '',\n      imgPath: '',\n      loading: false,\n      ruleForm: {\n        name: '',\n        pass: '',\n        repass: '',\n        yzm: '',\n        phone: '',\n        loading_text: ''\n      },\n      rules: {\n        name: [{\n          validator: name,\n          trigger: 'blur'\n        }],\n        pass: [{\n          validator: pass,\n          trigger: 'blur'\n        }],\n        repass: [{\n          validator: repass,\n          trigger: 'blur'\n        }],\n        phone: [{\n          validator: phone,\n          trigger: 'blur'\n        }] // yzm:[ { validator: yzm, trigger: 'blur' }],\n\n      }\n    };\n  },\n  methods: {\n    login: function login() {\n      this.$router.push({\n        path: '/'\n      });\n    },\n    beforeUpload: function beforeUpload(file) {\n      var fd = new FormData();\n      fd.append('image', file); //传文件\n\n      fd.append('sign', this.$sign); //传其他参数\n\n      fd.append('username', localStorage.getItem('name')); //传其他参数\n\n      fd.append('path', localStorage.getItem('path')); //传其他参数\n\n      var that = this;\n      console.log(file);\n      this.$http.post(this.$host + 'upload', fd).then(function (res) {\n        if (res.data.code == 1) {\n          that.imgPath = res.data.name;\n          console.log(that.imgPath);\n          that.$message({\n            showClose: true,\n            message: '上传成功',\n            type: 'success'\n          });\n        }\n      });\n    },\n    register: function register(ruleForm) {\n      var _this2 = this;\n\n      this.$refs[ruleForm].validate(function (valid) {\n        if (valid) {\n          if (_this2.ruleForm.yzm != _this2.checkcode) {\n            _this2.$alert('验证码错误', '提示', {\n              confirmButtonText: '确定'\n            });\n\n            return false;\n          }\n\n          _this2.loading = true;\n          _this2.loading_text = '正在注册，请稍后';\n\n          _this2.$http.post(_this2.$host + \"register\", _this2.$qs.stringify({\n            \"username\": _this2.ruleForm.name,\n            \"password\": _this2.ruleForm.pass,\n            \"phone\": _this2.ruleForm.phone,\n            \"code\": _this2.ruleForm.yzm,\n            \"truecode\": _this2.checkcode,\n            \"imgpath\": _this2.imgPath\n          })).then(function (res) {\n            if (res.data.code == 0) {\n              _this2.$alert('注册成功', '提示', {\n                confirmButtonText: '确定',\n                callback: function callback(action) {\n                  _this2.$router.push({\n                    path: '/'\n                  });\n                }\n              });\n            } else if (res.data.code == 1) {\n              _this2.loading = false;\n\n              _this2.$refs[ruleForm].resetFields();\n\n              _this2.$alert('用户名已存在', '提示', {\n                confirmButtonText: '确定'\n              });\n            } else if (res.data.code == 2) {\n              _this2.loading = false;\n\n              _this2.$refs[ruleForm].resetFields();\n\n              _this2.$alert('验证码错误', '提示', {\n                confirmButtonText: '确定'\n              });\n            } else {\n              console.log('error submit!!');\n              return false;\n            }\n          });\n        }\n      });\n    },\n    home: function home() {\n      this.$router.push({\n        path: '/'\n      });\n    },\n    resetForm: function resetForm(ruleForm) {\n      this.$refs[ruleForm].resetFields();\n    },\n    getcode: function getcode(ruleForm) {\n      var _this3 = this;\n\n      this.$refs[ruleForm].validate(function (valid) {\n        if (valid) {\n          _this3.loading = true;\n          _this3.loading_text = '正在发送验证码';\n\n          if (_this3.ruleForm.phone.length !== 11) {\n            _this3.$alert('请输入正确的手机格式', '提示', {\n              confirmButtonText: '确定'\n            });\n          } else {\n            var that = _this3;\n\n            _this3.$http.post(_this3.$host + 'yzm', _this3.$qs.stringify({\n              \"phone\": _this3.ruleForm.phone\n            })).then(function (res) {\n              if (res.data.code == 0) {\n                that.checkcode = res.data.checkcode;\n                _this3.loading = false;\n\n                _this3.$alert('发送成功', '提示', {\n                  confirmButtonText: '确定'\n                });\n              }\n            });\n          }\n        } else {\n          return;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Register.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"main\">\r\n\r\n\t\t<el-card class=\"box-card\" v-loading=\"loading\" :element-loading-text=\"loading_text\">\r\n\t\t\t<div slot=\"header\" class=\"clearfix\">\r\n\t\t\t\t<span>注册</span>\r\n\t\t\t\t<el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"login\">已经有账号？去登陆\r\n\t\t\t\t</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-row type=\"flex\" justify=\"center\">\r\n\t\t\t\t<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" class=\"demo-ruleForm\">\r\n\r\n\t\t\t\t\t<el-form-item prop=\"name\">\r\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.name\" placeholder=\"账号\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item prop=\"pass\">\r\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.pass\" show-password placeholder=\"密码\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item prop=\"repass\">\r\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.repass\" show-password placeholder=\"确认密码\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item prop=\"phone\">\r\n\t\t\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"ruleForm.phone\" style=\"width: 90%;\" placeholder=\"手机号码\"></el-input>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"getcode('ruleForm')\" id=\"yzm\" style=\"width: 100%;\">获取验证码\r\n\t\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item prop=\"yzm\" id=\"yzm\">\r\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.yzm\" placeholder=\"手机验证码\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t\t\t<el-upload class=\"upload-demo\" :before-upload=\"beforeUpload\" multiple>\r\n\t\t\t\t\t\t\t\t<!-- <el-button slot=\"trigger\" size=\"small\" type=\"primary\" @click=\"delFile\">选取文件</el-button> -->\r\n\r\n\t\t\t\t\t\t\t\t<el-button size=\"small\" type=\"primary\" @click=\"uploadImg\">上传头像</el-button>\r\n\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t\t\t<!-- <el-button\r\n\t\t\t\t\t\t\t  style=\"margin-left: 10px;\"\r\n\t\t\t\t\t\t\t  size=\"small\"\r\n\t\t\t\t\t\t\t  type=\"success\"\r\n\t\t\t\t\t\t\t  @click=\"submitUpload\"\r\n\t\t\t\t\t\t\t>上传到服务器</el-button> -->\r\n\t\t\t\t\t\t\t<div class=\"el-upload__tip\">\r\n\t\t\t\t\t\t\t\t<font style=\"size: 8px;\">上传的文件限制大小为500k</font>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-col>\r\n\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"register('ruleForm')\" class=\"register\">注册</el-button>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\r\n\r\n\t\t\t</el-row>\r\n\t\t</el-card>\r\n\r\n\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: \"Register\",\r\n\t\tdata() {\r\n\r\n\t\t\tvar name = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入账号'));\r\n\t\t\t\t} else if (value.length < 3) {\r\n\t\t\t\t\tcallback(new Error('至少位三个字符'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar pass = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入密码'));\r\n\t\t\t\t} else if (value.length < 6) {\r\n\t\t\t\t\tcallback(new Error('至少位六个字符'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar repass = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入密码'));\r\n\t\t\t\t} else if (value !== this.ruleForm.pass) {\r\n\t\t\t\t\tcallback(new Error('两次输入密码不一致!'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar phone = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入手机号'));\r\n\t\t\t\t} else if (value.length !== 11) {\r\n\t\t\t\t\tcallback(new Error('请输入正确的手机号'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar yzm = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入验证码'));\r\n\t\t\t\t} else if (value.length !== 6) {\r\n\t\t\t\t\tcallback(new Error('请输入6位数字验证码'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\tcheckcode: '',\r\n\t\t\t\timgPath: '',\r\n\t\t\t\tloading: false,\r\n\t\t\t\truleForm: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tpass: '',\r\n\t\t\t\t\trepass: '',\r\n\t\t\t\t\tyzm: '',\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t\tloading_text: ''\r\n\r\n\t\t\t\t},\r\n\t\t\t\trules: {\r\n\t\t\t\t\tname: [{\r\n\t\t\t\t\t\t\tvalidator: name,\r\n\t\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t],\r\n\t\t\t\t\tpass: [{\r\n\t\t\t\t\t\tvalidator: pass,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}, ],\r\n\t\t\t\t\trepass: [{\r\n\t\t\t\t\t\tvalidator: repass,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}, ],\r\n\t\t\t\t\tphone: [{\r\n\t\t\t\t\t\tvalidator: phone,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t// yzm:[ { validator: yzm, trigger: 'blur' }],\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tlogin() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tbeforeUpload(file) {\r\n\t\t\t\tlet fd = new FormData();\r\n\t\t\t\tfd.append('image', file); //传文件\r\n\t\t\t\tfd.append('sign', this.$sign); //传其他参数\r\n\t\t\t\tfd.append('username', localStorage.getItem('name')); //传其他参数\r\n\t\t\t\tfd.append('path', localStorage.getItem('path')); //传其他参数\r\n\t\t\t\tvar that = this\r\n\t\t\t\tconsole.log(file)\r\n\r\n\t\t\t\tthis.$http.post(this.$host + 'upload', fd).then(res => {\r\n\t\t\t\t\tif (res.data.code == 1) {\r\n\t\t\t\t\t\tthat.imgPath = res.data.name\r\n\t\t\t\t\t\tconsole.log(that.imgPath)\r\n\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\tmessage: '上传成功',\r\n\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tregister(ruleForm) {\r\n\r\n\t\t\t\tthis.$refs[ruleForm].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tif(this.ruleForm.yzm != this.checkcode){\r\n\t\t\t\t\t\t\tthis.$alert('验证码错误', '提示', {\r\n\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.loading = true\r\n\t\t\t\t\t\tthis.loading_text = '正在注册，请稍后'\r\n\t\t\t\t\t\tthis.$http.post(this.$host + \"register\", this.$qs.stringify({\r\n\t\t\t\t\t\t\t\"username\": this.ruleForm.name,\r\n\t\t\t\t\t\t\t\"password\": this.ruleForm.pass,\r\n\t\t\t\t\t\t\t\"phone\": this.ruleForm.phone,\r\n\t\t\t\t\t\t\t\"code\": this.ruleForm.yzm,\r\n\t\t\t\t\t\t\t\"truecode\": this.checkcode,\r\n\t\t\t\t\t\t\t\"imgpath\": this.imgPath\r\n\t\t\t\t\t\t})).then(res => {\r\n\t\t\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\t\t\tthis.$alert('注册成功', '提示', {\r\n\t\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t\t\tcallback: action => {\r\n\t\t\t\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\t\t\t\t\tpath: '/'\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t}  else if (res.data.code == 1) {\r\n\t\t\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t\t\t\tthis.$refs[ruleForm].resetFields();\r\n\t\t\t\t\t\t\t\tthis.$alert('用户名已存在', '提示', {\r\n\t\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else if (res.data.code == 2) {\r\n\t\t\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t\t\t\tthis.$refs[ruleForm].resetFields();\r\n\t\t\t\t\t\t\t\tthis.$alert('验证码错误', '提示', {\r\n\t\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log('error submit!!');\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thome() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tresetForm(ruleForm) {\r\n\t\t\t\tthis.$refs[ruleForm].resetFields();\r\n\t\t\t},\r\n\t\t\tgetcode(ruleForm) {\r\n\t\t\t\tthis.$refs[ruleForm].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tthis.loading = true\r\n\t\t\t\t\t\tthis.loading_text = '正在发送验证码'\r\n\t\t\t\t\t\tif (this.ruleForm.phone.length !== 11) {\r\n\t\t\t\t\t\t\tthis.$alert('请输入正确的手机格式', '提示', {\r\n\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\t\tthis.$http.post(this.$host + 'yzm', this.$qs.stringify({\r\n\t\t\t\t\t\t\t\t\"phone\": this.ruleForm.phone\r\n\t\t\t\t\t\t\t})).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\t\t\t\tthat.checkcode = res.data.checkcode\r\n\t\t\t\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t\t\t\t\tthis.$alert('发送成功', '提示', {\r\n\t\t\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\ta {\r\n\t\tcolor: white;\r\n\t\ttext-decoration: none;\r\n\t}\r\n\r\n\ta:hover {\r\n\t\tcolor: gray;\r\n\t}\r\n\r\n\t.main {\r\n\t\tbackground: url(\"../assets/bg.jpg\") no-repeat;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-size: 100%100%;\r\n\t}\r\n\r\n\t.box-card {\r\n\t\tmax-width: 400px;\r\n\t\tmin-width: 320px;\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttop: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\r\n\t}\r\n\r\n\t.register {\r\n\t\twidth: 100%;\r\n\t}\r\n</style>\n"],"sourceRoot":"src/views"}]}