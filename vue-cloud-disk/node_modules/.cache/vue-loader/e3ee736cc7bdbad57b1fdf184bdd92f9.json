{"remainingRequest":"D:\\uinapp\\vue-cloud-disk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\uinapp\\vue-cloud-disk\\src\\views\\Register.vue?vue&type=style&index=0&id=63ae9146&scoped=true&lang=css&","dependencies":[{"path":"D:\\uinapp\\vue-cloud-disk\\src\\views\\Register.vue","mtime":1629611984941},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\css-loader\\index.js","mtime":1628037310333},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1628037334943},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\postcss-loader\\src\\index.js","mtime":1628037337411},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1628037320207},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\vue-loader\\lib\\index.js","mtime":1628037334930}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\na {\n\tcolor: white;\n\ttext-decoration: none;\n}\n\na:hover {\n\tcolor: gray;\n}\n\n.main {\n\tbackground: url(\"../assets/bg.jpg\") no-repeat;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-size: 100%100%;\n}\n\n.box-card {\n\tmax-width: 400px;\n\tmin-width: 320px;\n\tposition: absolute;\n\tleft: 50%;\n\ttop: 50%;\n\ttransform: translate(-50%, -50%);\n\n}\n\n.register {\n\twidth: 100%;\n}\n",{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqRA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA","file":"Register.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div class=\"main\">\r\n\r\n\t\t<el-card class=\"box-card\" v-loading=\"loading\" :element-loading-text=\"loading_text\">\r\n\t\t\t<div slot=\"header\" class=\"clearfix\">\r\n\t\t\t\t<span>注册</span>\r\n\t\t\t\t<el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"login\">已经有账号？去登陆\r\n\t\t\t\t</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-row type=\"flex\" justify=\"center\">\r\n\t\t\t\t<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" class=\"demo-ruleForm\">\r\n\r\n\t\t\t\t\t<el-form-item prop=\"name\">\r\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.name\" placeholder=\"账号\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item prop=\"pass\">\r\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.pass\" show-password placeholder=\"密码\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item prop=\"repass\">\r\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.repass\" show-password placeholder=\"确认密码\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item prop=\"phone\">\r\n\t\t\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"ruleForm.phone\" style=\"width: 90%;\" placeholder=\"手机号码\"></el-input>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"getcode('ruleForm')\" id=\"yzm\" style=\"width: 100%;\">获取验证码\r\n\t\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item prop=\"yzm\" id=\"yzm\">\r\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.yzm\" placeholder=\"手机验证码\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t\t\t<el-upload class=\"upload-demo\" :before-upload=\"beforeUpload\" multiple>\r\n\t\t\t\t\t\t\t\t<!-- <el-button slot=\"trigger\" size=\"small\" type=\"primary\" @click=\"delFile\">选取文件</el-button> -->\r\n\r\n\t\t\t\t\t\t\t\t<el-button size=\"small\" type=\"primary\" @click=\"uploadImg\">上传头像</el-button>\r\n\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t\t\t<!-- <el-button\r\n\t\t\t\t\t\t\t  style=\"margin-left: 10px;\"\r\n\t\t\t\t\t\t\t  size=\"small\"\r\n\t\t\t\t\t\t\t  type=\"success\"\r\n\t\t\t\t\t\t\t  @click=\"submitUpload\"\r\n\t\t\t\t\t\t\t>上传到服务器</el-button> -->\r\n\t\t\t\t\t\t\t<div class=\"el-upload__tip\">\r\n\t\t\t\t\t\t\t\t<font style=\"size: 8px;\">上传的文件限制大小为500k</font>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-col>\r\n\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"register('ruleForm')\" class=\"register\">注册</el-button>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\r\n\r\n\t\t\t</el-row>\r\n\t\t</el-card>\r\n\r\n\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: \"Register\",\r\n\t\tdata() {\r\n\r\n\t\t\tvar name = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入账号'));\r\n\t\t\t\t} else if (value.length < 3) {\r\n\t\t\t\t\tcallback(new Error('至少位三个字符'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar pass = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入密码'));\r\n\t\t\t\t} else if (value.length < 6) {\r\n\t\t\t\t\tcallback(new Error('至少位六个字符'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar repass = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入密码'));\r\n\t\t\t\t} else if (value !== this.ruleForm.pass) {\r\n\t\t\t\t\tcallback(new Error('两次输入密码不一致!'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar phone = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入手机号'));\r\n\t\t\t\t} else if (value.length !== 11) {\r\n\t\t\t\t\tcallback(new Error('请输入正确的手机号'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar yzm = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入验证码'));\r\n\t\t\t\t} else if (value.length !== 6) {\r\n\t\t\t\t\tcallback(new Error('请输入6位数字验证码'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\tcheckcode: '',\r\n\t\t\t\timgPath: '',\r\n\t\t\t\tloading: false,\r\n\t\t\t\truleForm: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tpass: '',\r\n\t\t\t\t\trepass: '',\r\n\t\t\t\t\tyzm: '',\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t\tloading_text: ''\r\n\r\n\t\t\t\t},\r\n\t\t\t\trules: {\r\n\t\t\t\t\tname: [{\r\n\t\t\t\t\t\t\tvalidator: name,\r\n\t\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t],\r\n\t\t\t\t\tpass: [{\r\n\t\t\t\t\t\tvalidator: pass,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}, ],\r\n\t\t\t\t\trepass: [{\r\n\t\t\t\t\t\tvalidator: repass,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}, ],\r\n\t\t\t\t\tphone: [{\r\n\t\t\t\t\t\tvalidator: phone,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t// yzm:[ { validator: yzm, trigger: 'blur' }],\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tlogin() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tbeforeUpload(file) {\r\n\t\t\t\tlet fd = new FormData();\r\n\t\t\t\tfd.append('image', file); //传文件\r\n\t\t\t\tfd.append('sign', this.$sign); //传其他参数\r\n\t\t\t\tfd.append('username', localStorage.getItem('name')); //传其他参数\r\n\t\t\t\tfd.append('path', localStorage.getItem('path')); //传其他参数\r\n\t\t\t\tvar that = this\r\n\t\t\t\tconsole.log(file)\r\n\r\n\t\t\t\tthis.$http.post(this.$host + 'upload', fd).then(res => {\r\n\t\t\t\t\tif (res.data.code == 1) {\r\n\t\t\t\t\t\tthat.imgPath = res.data.name\r\n\t\t\t\t\t\t// console.log(\"img-------->\"+that.imgPath)\r\n\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\tmessage: '上传成功',\r\n\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tregister(ruleForm) {\r\n\r\n\t\t\t\tthis.$refs[ruleForm].validate((valid) => {\r\n\t\t\t\t\tvar this = that\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tif(this.ruleForm.yzm != this.checkcode){\r\n\t\t\t\t\t\t\tthis.$alert('验证码错误', '提示', {\r\n\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.loading = true\r\n\t\t\t\t\t\tthis.loading_text = '正在注册，请稍后'\r\n\t\t\t\t\t\tthis.$http.post(this.$host + \"register\", this.$qs.stringify({\r\n\t\t\t\t\t\t\t\"username\": this.ruleForm.name,\r\n\t\t\t\t\t\t\t\"password\": this.ruleForm.pass,\r\n\t\t\t\t\t\t\t\"phone\": this.ruleForm.phone,\r\n\t\t\t\t\t\t\t// \"code\": this.ruleForm.yzm,\r\n\t\t\t\t\t\t\t// \"truecode\": this.checkcode,\r\n\t\t\t\t\t\t\t\"imgpath\": this.imgPath\r\n\t\t\t\t\t\t})).then(res => {\r\n\t\t\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\t\t\tthis.$alert('注册成功', '提示', {\r\n\t\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t\t\tcallback: action => {\r\n\t\t\t\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\t\t\t\t\tpath: '/'\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t}  else if (res.data.code == 1) {\r\n\t\t\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t\t\t\tthis.$refs[ruleForm].resetFields();\r\n\t\t\t\t\t\t\t\tthis.$alert('用户名已存在', '提示', {\r\n\t\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}else if (res.data.code == 2) {\r\n\t\t\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t\t\t\tthis.$refs[ruleForm].resetFields();\r\n\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t\t\tmessage: '文件已存在',\r\n\t\t\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thome() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tresetForm(ruleForm) {\r\n\t\t\t\tthis.$refs[ruleForm].resetFields();\r\n\t\t\t},\r\n\t\t\tgetcode(ruleForm) {\r\n\t\t\t\tthis.$refs[ruleForm].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tthis.loading = true\r\n\t\t\t\t\t\tthis.loading_text = '正在发送验证码'\r\n\t\t\t\t\t\tif (this.ruleForm.phone.length !== 11) {\r\n\t\t\t\t\t\t\tthis.$alert('请输入正确的手机格式', '提示', {\r\n\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\t\tthis.$http.post(this.$host + 'yzm', this.$qs.stringify({\r\n\t\t\t\t\t\t\t\t\"phone\": this.ruleForm.phone\r\n\t\t\t\t\t\t\t})).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\t\t\t\tthat.checkcode = res.data.checkcode\r\n\t\t\t\t\t\t\t\t\t// console.log(\"yzm ------------->\"+that.checkcode)\r\n\t\t\t\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t\t\t\t\tthis.$alert('发送成功', '提示', {\r\n\t\t\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\ta {\r\n\t\tcolor: white;\r\n\t\ttext-decoration: none;\r\n\t}\r\n\r\n\ta:hover {\r\n\t\tcolor: gray;\r\n\t}\r\n\r\n\t.main {\r\n\t\tbackground: url(\"../assets/bg.jpg\") no-repeat;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-size: 100%100%;\r\n\t}\r\n\r\n\t.box-card {\r\n\t\tmax-width: 400px;\r\n\t\tmin-width: 320px;\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttop: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\r\n\t}\r\n\r\n\t.register {\r\n\t\twidth: 100%;\r\n\t}\r\n</style>\n"]}]}