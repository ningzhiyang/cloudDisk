{"remainingRequest":"D:\\uinapp\\vue-cloud-disk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\uinapp\\vue-cloud-disk\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\uinapp\\vue-cloud-disk\\src\\views\\Login.vue","mtime":1628236988400},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1628037320207},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1628037317753},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\babel-loader\\lib\\index.js","mtime":1628037337839},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1628037320207},{"path":"D:\\uinapp\\vue-cloud-disk\\node_modules\\vue-loader\\lib\\index.js","mtime":1628037334930}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tname: \"Login\",\n\n\tdata() {\n\t\tvar name = (rule, value, callback) => {\n\t\t\tif (value === '') {\n\t\t\t\tcallback(new Error('请输入账号'));\n\t\t\t} else {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\t\tvar pass = (rule, value, callback) => {\n\t\t\tif (value === '') {\n\t\t\t\tcallback(new Error('请输入密码'));\n\t\t\t} else {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\t\treturn {\n\t\t\tloading: false,\n\t\t\truleForm: {\n\t\t\t\tname: '',\n\t\t\t\tpass: ''\n\t\t\t},\n\t\t\trules: {\n\t\t\t\tname: [{\n\t\t\t\t\t\tvalidator: name,\n\t\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t\t},\n\n\t\t\t\t],\n\t\t\t\tpass: [{\n\t\t\t\t\tvalidator: pass,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}, ],\n\n\t\t\t}\n\n\t\t}\n\t},\n\tmethods: {\n\t\tlogin(ruleForm) {\n\t\t\tthis.$refs[ruleForm].validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tvar that = this;\n\t\t\t\t\tthis.$http.post(this.$host+'to_login', this.$qs.stringify({\n\t\t\t\t\t\t\tusername: this.ruleForm.name,\n\t\t\t\t\t\t\tpassword: this.ruleForm.pass,\n\t\t\t\t\t\t}))\n\t\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (response.data.code == 1) {\n\t\t\t\t\t\t\t\tthat.$message({\n\t\t\t\t\t\t\t\t\tmessage: '登录成功！！！',\n\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t//使用location 记录用户信息\n\n\t\t\t\t\t\t\t\tlocalStorage.setItem('userimg',response.data.userimg)\n\t\t\t\t\t\t\t\tlocalStorage.setItem('uid', that.$md5(that.ruleForm.name))\n\t\t\t\t\t\t\t\tlocalStorage.setItem('name', that.ruleForm.name)\n\t\t\t\t\t\t\t\tlocalStorage.setItem('used',response.data.used)\n\n\t\t\t\t\t\t\t\tthat.$router.push(\"/home\")\n\t\t\t\t\t\t\t} else if(response.data.code == -1){\n\t\t\t\t\t\t\t\tthat.$message({\n\t\t\t\t\t\t\t\t\tmessage: '当前用户被封禁！！！',\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tthat.$message({\n\t\t\t\t\t\t\t\t\tmessage: '用户名或密码错误！！！',\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('error submit!!');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\n\t\t},\n\t\tresetForm(ruleForm) {\n\t\t\tthis.$refs[ruleForm].resetFields();\n\t\t},\n\t\tregister() {\n\t\t\tthis.$router.push({\n\t\t\t\tpath: 'Register'\n\t\t\t})\n\t\t},\n\t\thome() {\n\t\t\tthis.$router.push({\n\t\t\t\tpath: '/Home'\n\t\t\t})\n\t\t}\n\t}\n}\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div class=\"main\">\r\n\r\n\r\n\t\t<el-card class=\"box-card\" v-loading=\"loading\" element-loading-text=\"正在登录，请稍后\">\r\n\t\t\t<div slot=\"header\" class=\"clearfix\">\r\n\t\t\t\t<span>登录</span>\r\n\t\t\t\t<el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"register\">还没有账号？去注册\r\n\t\t\t\t</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-row type=\"flex\" justify=\"center\">\r\n\t\t\t\t<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" class=\"demo-ruleForm\">\r\n\t\t\t\t\t<el-form-item prop=\"name\">\r\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.name \" placeholder=\"账号\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item prop=\"pass\">\r\n\t\t\t\t\t\t<el-input v-model=\"ruleForm.pass\" show-password placeholder=\"密码\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"login('ruleForm')\" class=\"login\">登录</el-button>\r\n\t\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t</el-form>\r\n\r\n\t\t\t</el-row>\r\n\t\t</el-card>\r\n\r\n\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\r\n\texport default {\r\n\t\tname: \"Login\",\r\n\r\n\t\tdata() {\r\n\t\t\tvar name = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入账号'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar pass = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入密码'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\truleForm: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tpass: ''\r\n\t\t\t\t},\r\n\t\t\t\trules: {\r\n\t\t\t\t\tname: [{\r\n\t\t\t\t\t\t\tvalidator: name,\r\n\t\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t],\r\n\t\t\t\t\tpass: [{\r\n\t\t\t\t\t\tvalidator: pass,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tlogin(ruleForm) {\r\n\t\t\t\tthis.$refs[ruleForm].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\tthis.$http.post(this.$host+'to_login', this.$qs.stringify({\r\n\t\t\t\t\t\t\t\tusername: this.ruleForm.name,\r\n\t\t\t\t\t\t\t\tpassword: this.ruleForm.pass,\r\n\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (response.data.code == 1) {\r\n\t\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\tmessage: '登录成功！！！',\r\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t//使用location 记录用户信息\r\n\r\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('userimg',response.data.userimg)\r\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('uid', that.$md5(that.ruleForm.name))\r\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('name', that.ruleForm.name)\r\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('used',response.data.used)\r\n\r\n\t\t\t\t\t\t\t\t\tthat.$router.push(\"/home\")\r\n\t\t\t\t\t\t\t\t} else if(response.data.code == -1){\r\n\t\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\tmessage: '当前用户被封禁！！！',\r\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\tmessage: '用户名或密码错误！！！',\r\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('error submit!!');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t},\r\n\t\t\tresetForm(ruleForm) {\r\n\t\t\t\tthis.$refs[ruleForm].resetFields();\r\n\t\t\t},\r\n\t\t\tregister() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: 'Register'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thome() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/Home'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\ta {\r\n\t\tcolor: white;\r\n\t\ttext-decoration: none;\r\n\t}\r\n\r\n\ta:hover {\r\n\t\tcolor: gray;\r\n\t}\r\n\r\n\t.main {\r\n\t\tbackground: url(\"../assets/bg.jpg\") no-repeat;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-size: 100%100%;\r\n\t}\r\n\r\n\t.box-card {\r\n\t\tmax-width: 400px;\r\n\t\tmin-width: 320px;\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttop: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\r\n\t}\r\n\r\n\t.login {\r\n\t\twidth: 100%;\r\n\t}\r\n</style>\n"]}]}